<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Campeonatos de Futebol</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="logo">
        <h1>FutManager</h1>
      </div>
      <nav class="main-nav">
        <ul>
          <li><a href="#" class="nav-link active" data-section="tabela">Tabela</a></li>
          <li><a href="#" class="nav-link" data-section="clubes">Clubes</a></li>
          <li><a href="#" class="nav-link" data-section="partidas">Partidas</a></li>
          <li><a href="#" class="nav-link" data-section="jogadores">Jogadores</a></li>
        </ul>
      </nav>
      <div class="auth-container">
        <button id="loginButton" class="btn-login">
          <i class="fas fa-user"></i> Login
        </button>
        <div id="userInfo" class="user-info hidden">
          <span id="userName"></span>
          <button id="logoutButton" class="btn-logout">Sair</button>
        </div>
      </div>
      <button class="mobile-menu-toggle">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </header>

  <main>
    <div class="container">
      <!-- Seção de Tabela -->
      <section id="tabela" class="section-content active">
        <div class="section-header">
          <h2>Tabela de Classificação</h2>
        </div>
        <div class="card">
          <div class="table-container">
            <table id="tabelaClassificacao" class="data-table">
              <thead>
                <tr>
                  <th class="pos">Pos</th>
                  <th class="clube">Clube</th>
                  <th>P</th>
                  <th>J</th>
                  <th>V</th>
                  <th>E</th>
                  <th>D</th>
                  <th>GP</th>
                  <th>GC</th>
                  <th>SG</th>
                </tr>
              </thead>
              <tbody id="tabelaBody">
                <!-- Preenchido via JavaScript -->
              </tbody>
            </table>
          </div>
          <div id="tabelaLoading" class="loading-container">
            <div class="loading-spinner"></div>
          </div>
          <div id="tabelaEmpty" class="empty-state hidden">
            <i class="fas fa-trophy empty-icon"></i>
            <p>Nenhum clube cadastrado ainda.</p>
          </div>
        </div>
      </section>

      <!-- Seção de Clubes -->
      <section id="clubes" class="section-content">
        <div class="section-header">
          <h2>Clubes</h2>
          <div id="adminClubControls" class="admin-controls hidden">
            <button id="addClubButton" class="btn btn-primary">
              <i class="fas fa-plus"></i> Adicionar Clube
            </button>
          </div>
        </div>
        <div id="clubesContainer" class="cards-container">
          <!-- Preenchido via JavaScript -->
        </div>
        <div id="clubesLoading" class="loading-container">
          <div class="loading-spinner"></div>
        </div>
        <div id="clubesEmpty" class="empty-state hidden">
          <i class="fas fa-shield-alt empty-icon"></i>
          <p>Nenhum clube cadastrado ainda.</p>
        </div>
      </section>

      <!-- Seção de Partidas -->
      <section id="partidas" class="section-content">
        <div class="section-header">
          <h2>Partidas</h2>
          <div id="adminMatchControls" class="admin-controls hidden">
            <button id="addMatchButton" class="btn btn-primary">
              <i class="fas fa-plus"></i> Adicionar Partida
            </button>
          </div>
        </div>
        <div class="card">
          <div class="matches-filter">
            <select id="filterMatchStatus" class="form-control">
              <option value="all">Todas as partidas</option>
              <option value="upcoming">Próximas partidas</option>
              <option value="completed">Partidas finalizadas</option>
            </select>
          </div>
          <div id="partidasContainer" class="matches-container">
            <!-- Preenchido via JavaScript -->
          </div>
          <div id="partidasLoading" class="loading-container">
            <div class="loading-spinner"></div>
          </div>
          <div id="partidasEmpty" class="empty-state hidden">
            <i class="fas fa-futbol empty-icon"></i>
            <p>Nenhuma partida cadastrada ainda.</p>
          </div>
        </div>
      </section>

      <!-- Seção de Jogadores -->
      <section id="jogadores" class="section-content">
        <div class="section-header">
          <h2>Jogadores</h2>
          <div class="filter-container">
            <select id="filterClub" class="form-control">
              <option value="all">Todos os clubes</option>
              <!-- Opções preenchidas via JavaScript -->
            </select>
            <div id="adminPlayerControls" class="admin-controls hidden">
              <button id="addPlayerButton" class="btn btn-primary">
                <i class="fas fa-plus"></i> Adicionar Jogador
              </button>
            </div>
          </div>
        </div>
        <div id="jogadoresContainer" class="cards-container">
          <!-- Preenchido via JavaScript -->
        </div>
        <div id="jogadoresLoading" class="loading-container">
          <div class="loading-spinner"></div>
        </div>
        <div id="jogadoresEmpty" class="empty-state hidden">
          <i class="fas fa-running empty-icon"></i>
          <p>Nenhum jogador cadastrado ainda.</p>
        </div>
      </section>

      <!-- Seção de Artilharia -->
      <section id="artilharia" class="section-content">
        <div class="section-header">
          <h2>Artilharia</h2>
        </div>
        <div class="card">
          <div class="top-scorers" id="topScorersContainer">
            <!-- Filled via JavaScript -->
          </div>
          <div id="artilhariaLoading" class="loading-container">
            <div class="loading-spinner"></div>
          </div>
          <div id="artilhariaEmpty" class="empty-state hidden">
            <i class="fas fa-futbol empty-icon"></i>
            <p>Nenhum artilheiro registrado ainda.</p>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Modais -->
  <div id="modalOverlay" class="modal-overlay hidden">
    <!-- Modal de Login -->
    <div id="loginModal" class="modal hidden">
      <div class="modal-header">
        <h3>Login de Administrador</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <form id="loginForm">
          <div class="form-group">
            <label for="password">Senha</label>
            <input type="password" id="password" class="form-control" required>
          </div>
          <div class="form-error hidden" id="loginError"></div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-block">Entrar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal de Clube -->
    <div id="clubModal" class="modal hidden">
      <div class="modal-header">
        <h3 id="clubModalTitle">Adicionar Clube</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <form id="clubForm">
          <input type="hidden" id="clubId">
          <div class="form-group">
            <label for="clubName">Nome do Clube</label>
            <input type="text" id="clubName" class="form-control" required>
          </div>
          <div class="form-group">
            <label for="clubAbbreviation">Abreviação</label>
            <input type="text" id="clubAbbreviation" class="form-control" maxlength="3" required>
          </div>
          <div class="form-group">
            <label for="clubFoundationYear">Ano de Fundação</label>
            <input type="number" id="clubFoundationYear" class="form-control" required>
          </div>
          <div class="form-group">
            <label for="clubLogo">Escudo</label>
            <div class="file-input-container">
              <input type="file" id="clubLogo" accept="image/*">
              <div class="file-preview" id="logoPreview">
                <img id="logoPreviewImg" src="" alt="Preview" class="hidden">
                <div id="logoPlaceholder" class="file-placeholder">
                  <i class="fas fa-upload"></i>
                  <span>Selecionar imagem</span>
                </div>
              </div>
            </div>
          </div>
          <div class="form-error hidden" id="clubError"></div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary modal-close-btn">Cancelar</button>
            <button type="submit" class="btn btn-primary">Salvar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal de Partida -->
    <div id="matchModal" class="modal hidden">
      <div class="modal-header">
        <h3 id="matchModalTitle">Adicionar Partida</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <form id="matchForm">
          <input type="hidden" id="matchId">
          <div class="form-group">
            <label for="matchDate">Data e Hora</label>
            <input type="datetime-local" id="matchDate" class="form-control" required>
          </div>
          <div class="form-group">
            <label for="homeClub">Clube Mandante</label>
            <select id="homeClub" class="form-control" required>
              <option value="">Selecione o clube</option>
              <!-- Opções preenchidas via JavaScript -->
            </select>
          </div>
          <div class="form-group">
            <label for="awayClub">Clube Visitante</label>
            <select id="awayClub" class="form-control" required>
              <option value="">Selecione o clube</option>
              <!-- Opções preenchidas via JavaScript -->
            </select>
          </div>
          <div id="resultFields" class="match-result-fields">
            <div class="form-group">
              <label for="matchStatus">Status da Partida</label>
              <select id="matchStatus" class="form-control" required>
                <option value="scheduled">Agendada</option>
                <option value="completed">Finalizada</option>
              </select>
            </div>
            <div id="scoreFields" class="score-fields hidden">
              <div class="score-inputs">
                <div class="form-group">
                  <label for="homeScore">Gols Mandante</label>
                  <input type="number" id="homeScore" class="form-control" min="0">
                </div>
                <div class="form-group">
                  <label for="awayScore">Gols Visitante</label>
                  <input type="number" id="awayScore" class="form-control" min="0">
                </div>
              </div>
            </div>
          </div>
          <div class="form-error hidden" id="matchError"></div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary modal-close-btn">Cancelar</button>
            <button type="submit" class="btn btn-primary">Salvar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal de Jogador -->
    <div id="playerModal" class="modal hidden">
      <div class="modal-header">
        <h3 id="playerModalTitle">Adicionar Jogador</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <form id="playerForm">
          <input type="hidden" id="playerId">
          <div class="form-group">
            <label for="playerName">Nome</label>
            <input type="text" id="playerName" class="form-control" required>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="playerAge">Idade</label>
              <input type="number" id="playerAge" class="form-control" min="15" max="50" required>
            </div>
            <div class="form-group">
              <label for="playerPosition">Posição</label>
              <select id="playerPosition" class="form-control" required>
                <option value="">Selecione</option>
                <option value="GOL">Goleiro</option>
                <option value="ZAG">Zagueiro</option>
                <option value="LD">Lateral Direito</option>
                <option value="LE">Lateral Esquerdo</option>
                <option value="VOL">Volante</option>
                <option value="MC">Meio-Campo</option>
                <option value="MEI">Meia</option>
                <option value="PE">Ponta Esquerda</option>
                <option value="PD">Ponta Direita</option>
                <option value="ATA">Atacante</option>
                <option value="CA">Centroavante</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="playerClub">Clube</label>
            <select id="playerClub" class="form-control" required>
              <option value="">Selecione o clube</option>
              <!-- Opções preenchidas via JavaScript -->
            </select>
          </div>
          <div class="form-group">
            <label for="playerPhoto">Foto do Jogador</label>
            <div class="file-input-container">
              <input type="file" id="playerPhoto" accept="image/*">
              <div class="file-preview" id="photoPreview">
                <img id="photoPreviewImg" src="" alt="Preview" class="hidden">
                <div id="photoPlaceholder" class="file-placeholder">
                  <i class="fas fa-upload"></i>
                  <span>Selecionar imagem</span>
                </div>
              </div>
            </div>
          </div>
          <div class="form-error hidden" id="playerError"></div>
          <div class="form-actions">
            <button type="button" class="btn btn-secondary modal-close-btn">Cancelar</button>
            <button type="submit" class="btn btn-primary">Salvar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal de Detalhes do Jogador -->
    <div id="playerDetailsModal" class="modal large-modal hidden">
      <div class="modal-header">
        <h3 id="playerDetailsName">Detalhes do Jogador</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="player-details-container">
          <div class="player-details-header">
            <div class="player-photo-container">
              <img id="playerDetailsPhoto" src="" alt="Foto do Jogador">
            </div>
            <div class="player-info-container">
              <div class="player-basic-info">
                <h4 id="playerDetailsNameFull"></h4>
                <div class="player-meta">
                  <span id="playerDetailsAge"></span> anos | 
                  <span id="playerDetailsPosition"></span> | 
                  <span id="playerDetailsClub"></span>
                </div>
              </div>
              <div class="player-stats">
                <div class="stat-item">
                  <span class="stat-label">Jogos</span>
                  <span class="stat-value" id="playerDetailsGames">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Gols</span>
                  <span class="stat-value" id="playerDetailsGoals">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Média</span>
                  <span class="stat-value" id="playerDetailsRating">0.0</span>
                </div>
              </div>
              <div class="player-market-value">
                <span class="market-value-label">Valor de Mercado:</span>
                <span class="market-value-amount" id="playerDetailsValue">R$ 0 FJJDOTY</span>
              </div>
            </div>
          </div>
          <div class="player-details-content">
            <h4>Histórico de Partidas</h4>
            <div id="playerMatchesContainer" class="player-matches-container">
              <!-- Preenchido via JavaScript -->
            </div>
            <div id="playerMatchesEmpty" class="empty-state-small hidden">
              <p>Nenhuma partida registrada.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de Confirmação -->
    <div id="confirmModal" class="modal small-modal hidden">
      <div class="modal-header">
        <h3>Confirmação</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <p id="confirmMessage"></p>
        <div class="form-actions">
          <button id="cancelConfirm" class="btn btn-secondary">Cancelar</button>
          <button id="confirmAction" class="btn btn-danger">Confirmar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts do Firebase -->
  <script type="module" src="js/firebase.js"></script>
  
  <!-- Scripts da Aplicação -->
  <script type="module" src="js/app.js"></script>
  <script type="module" src="js/auth.js"></script>
  <script type="module" src="js/clubes.js"></script>
  <script type="module" src="js/partidas.js"></script>
  <script type="module" src="js/tabela.js"></script>
  <script type="module" src="js/jogadores.js"></script>
  <script type="module" src="js/utils.js"></script>

</body>
</html>